<div id="myselfHeader">
  <script type="text/html" id="tplMyselfHeader">
    <div class="myselfHeaderCenter">
      <div class="myselfHeaderLogo"><img src="{{avatar}}" /></div>
      <div class="myselfHeaderName">{{nickname}}</div>
      <div class="myselfHeaderSignIn">{{signInText}}</div>
    </div>
    <div class="myselfHeaderContinuousSignIn">已连续签到{{continuous_signins}}天</div>
  </script>
</div>

<script type="text/javascript">
    function getSignInText(isSignIn){
	if(isSignIn){
	    return "已签到";
	}else{
	    return "签  到";
	}
    }

    $(function(){
	// var data = {
	//     "nickname":"天涯路",
	//     "wxopenid":"wx8901237191799ad",
	//     "avatar":"static/images/p.png",
	//     "sign_in_status":1,
	//     "score":132,
	//     "continuous_signins":18
	// };

	$.ajax({
	    url:buildRequestUrl(API_URL_GET_USER_BASIC_INFO, ""),
            type:"get",
            dataType: "json",
            success:function(res){
		if(res.status != 0) return;

		res.data.signInText = getSignInText(res.data.sign_in_status);
		$("#myselfHeader").html(Mustache.render(document.getElementById('tplMyselfHeader').innerHTML.trim(), res.data));
	    }
	});	       
    });
</script>
